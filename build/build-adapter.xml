<?xml version="1.0"?>
<project name="lofty-adapter-build" default="build" basedir="../">
    <description>Lofty Adapter Build File</description>
    
    <dirname property="root.dir" file="${ant.file.lofty-adapter-build}/../"/>
    <property name="dist.dir" location="${root.dir}/src/adapter/"/>
    <property name="tmp.dir" location="${dist.dir}/tmp/"/>

    <property name="fdev4.remote.dir" value="http://style.china.alibaba.com/fdevlib/js/fdev-v4/core"/>

    <property name="gears.debug.file" value="${dist.dir}/gears-debug.js"/>
    <property name="gears.file" value="${dist.dir}/gears.js"/>

    <target name="get">
        <mkdir dir="${tmp.dir}"/>
        <get dest="${tmp.dir}">
            <url url="${fdev4.remote.dir}/gears.js"/>
            <url url="${fdev4.remote.dir}/gears-min.js"/>
            <url url="${fdev4.remote.dir}/web.js"/>
            <url url="${fdev4.remote.dir}/web-min.js"/>
            <url url="${fdev4.remote.dir}/config.js"/>
            <url url="${fdev4.remote.dir}/config-min.js"/>
        </get>
    </target>

    <target name="concat" depends="get">
        <concat destfile="${gears.debug.file}" encoding="gbk" outputencoding="gbk">
            <path path="${tmp.dir}/gears.js"/>
            <path path="${tmp.dir}/web.js"/>
            <path path="${tmp.dir}/config.js"/>
        </concat>
        <concat destfile="${gears.file}" encoding="utf-8" outputencoding="utf-8" fixlastline="yes">
            <header>/*! adapter for fdev4 */</header>
            <path path="${tmp.dir}/gears-min.js"/>
            <path path="${tmp.dir}/web-min.js"/>
            <path path="${tmp.dir}/config-min.js"/>
        </concat>
    </target>

    <target name="clean">
        <delete dir="${tmp.dir}"/>
    </target>

    <target name="lofty_adapter" depends="concat,clean"/>
</project>
